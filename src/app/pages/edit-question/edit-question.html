<div
    class="max-w-5xl mx-auto p-8 rounded-2xl bg-white/70 backdrop-blur-md border border-white/40 shadow-sm"
>
    <h2 class="text-xl font-semibold text-zinc-900 mb-6">
        {{ 'editQuestion.updateQuestion' | translate }}
    </h2>

    <label class="block mb-2 text-sm font-medium text-zinc-700">
        {{ 'editQuestion.questionContent' | translate }}
    </label>

    <textarea
        [ngModel]="question()?.content"
        (ngModelChange)="updateQuestionContent($event)"
        rows="4"
        [placeholder]="'add-question.inputQuestion' | translate"
        class="w-full rounded-xl border border-zinc-300 bg-white/80 px-4 py-3 mb-6 resize-none focus:outline-none focus:ring-2 focus:ring-blue-400"
    ></textarea>

    <!-- Danh sách đáp án -->
    <h3 class="text-sm font-medium text-zinc-700 mb-3">
        {{ 'add-question.answerList' | translate }}
    </h3>

    @for (ans of oldAnswers(); track $index) {
    <div class="flex items-center gap-4 mb-3 p-3 rounded-xl bg-white/60 border border-zinc-200">
        <!-- Radio chọn đáp án đúng -->
        <input
            type="radio"
            name="correctAnswer"
            [checked]="ans.is_correct"
            (change)="markCorrectOldAnswer(ans.id)"
            class="w-4 h-4 accent-blue-500"
        />

        <!-- Nội dung đáp án -->
        <input
            type="text"
            [(ngModel)]="ans.content"
            [placeholder]="'add-question.answerContent' | translate"
            class="flex-1 rounded-lg border border-zinc-300 bg-white/80 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
        />

        <!-- Xóa đáp án -->
        @if ((oldAnswers().length + newAnswers().length) > 1) {
        <button
            class="px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 transition"
            (click)="removeOldAnswer(ans.id)"
        >
            X
        </button>
        }
    </div>
    } @for (ans of newAnswers(); track $index) {
    <div class="flex items-center gap-4 mb-3 p-3 rounded-xl bg-white/60 border border-zinc-200">
        <!-- Radio chọn đáp án đúng -->
        <input
            type="radio"
            name="correctAnswer"
            [checked]="ans.is_correct"
            (change)="markCorrectNewAnswer(ans.id)"
            class="w-4 h-4 accent-blue-500"
        />

        <!-- Nội dung đáp án -->
        <input
            type="text"
            [(ngModel)]="ans.content"
            [placeholder]="'add-question.answerContent' | translate"
            class="flex-1 rounded-lg border border-zinc-300 bg-white/80 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
        />

        <!-- Xóa đáp án -->
        @if ((oldAnswers().length + newAnswers().length) > 1) {
        <button
            class="px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 transition"
            (click)="removeNewAnswer(ans.id)"
        >
            X
        </button>
        }
    </div>
    }

    <!-- Nút thêm đáp án -->
    <button
        class="mt-4 inline-flex items-center px-4 py-2 text-sm font-medium text-zinc-800 bg-zinc-200 hover:bg-zinc-300 rounded-xl transition"
        (click)="addNewAnswer()"
    >
        {{ 'add-question.addAnswer' | translate }}
    </button>

    <!-- Nút hành động -->
    <div class="flex justify-end gap-3 mt-8">
        <button
            class="inline-flex items-center justify-center px-6 py-2.5 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 rounded-xl shadow-md hover:shadow-lg transition-all duration-200"
            (click)="save()"
        >
            {{ 'add-question.saveQuestion' | translate }}
        </button>
    </div>
</div>
